"use strict";(self["webpackChunkNIELLE"]=self["webpackChunkNIELLE"]||[]).push([[141],{141:function(e,t,l){l.r(t),l.d(t,{default:function(){return x}});var a=l(6768),u=l(144),o=l(4232),i=l(9600),n=l(4406),r=l(4466),s=l(8617);const v=["onClick","onMouseenter","onMouseleave"],d={key:1},p=["xmlns","viewBox"],c=["id"],y=["stop-color"],f=["stop-color"],g=["height","width","fill","rx"],b=["height","width","fill","rx"],h=["height","width","fill","rx"],m={key:2,ref:"source",dir:"auto"},x={__name:"vue-ui-sparkbar",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}},backgroundOpacity:{type:Number,default:null}},emits:["selectDatapoint"],setup(e,{emit:t}){const x=(0,a.$V)((()=>l.e(654).then(l.bind(l,3654)))),{vue_ui_sparkbar:k}=(0,n.u)(),C=e,w=(0,a.Ht)();(0,a.sV)((()=>{w["chart-background"]&&console.warn("VueUiSparkbar does not support the #chart-background slot.")}));const R=(0,u.KR)((0,i.c)()),A=(0,u.KR)($()),{loading:E,FINAL_DATASET:_}=(0,s.u)({...(0,u.QW)(C),FINAL_CONFIG:A,prepareConfig:$,skeletonDataset:[{name:"_",value:21,target:25,color:"#808080"},{name:"_",value:13,target:25,color:"#ADADAD"},{name:"_",value:8,target:25,color:"#DBDBDB"}],skeletonConfig:(0,i.t)({defaultConfig:A.value,userConfig:{style:{backgroundColor:"#99999930",animation:{show:!1},layout:{independant:!0},gutter:{backgroundColor:"#6A6A6A",opacity:50},bar:{gradient:{underlayerColor:"#6A6A6A"}}}}})}),L=(0,a.EW)((()=>!!A.value.debug));function $(){const e=(0,n.a)({userConfig:C.config,defaultConfig:k});return e.theme?{...(0,n.a)({userConfig:r.t.vue_ui_sparkbar[e.theme]||C.config,defaultConfig:e}),customPalette:i.b[e.theme]||i.p}:e}(0,a.wB)((()=>C.config),(e=>{A.value=$()}),{deep:!0});const I=(0,a.EW)((()=>(0,i.e)(A.value.customPalette))),S=(0,u.KR)(_.value.map((e=>({...e,value:A.value.style.animation.show?0:e.value||0,formatter:e.formatter||null})))),T=(0,u.KR)(null);function X(){if(A.value.style.animation.show){let e=function(){u+=a/t,u<a?(S.value=S.value.map(((e,t)=>({...e,value:e.value+=l[t]}))),T.value=requestAnimationFrame(e)):S.value=_.value.map((e=>({...e,value:e.value||0,formatter:e.formatter||null})))};const t=A.value.style.animation.animationFrames,l=_.value.map(((e,l)=>e.value/t)),a=_.value.map((e=>e.value||0)).reduce(((e,t)=>e+t),0);let u=0;e()}}(0,a.sV)((async()=>{(0,i.o)(C.dataset)&&(0,i.f)({componentName:"VueUiSparkbar",type:"dataset",debug:L.value}),X()})),(0,a.wB)((()=>_.value),(async e=>{cancelAnimationFrame(T.value),S.value=_.value.map((e=>({...e,value:A.value.style.animation.show?0:e.value||0,formatter:e.formatter||null}))),(0,a.dY)(X)}),{deep:!0});const F=(0,u.KR)({width:500,height:16}),z=(0,a.EW)((()=>Math.max(..._.value.map((e=>e.value))))),D=(0,a.EW)((()=>(_.value.forEach(((e,t)=>{(0,i.g)({datasetObject:e,requiredAttributes:["name","value"]}).forEach((e=>{(0,i.f)({componentName:"VueUiSparkbar",type:"datasetSerieAttribute",property:e,index:t,debug:L.value})}))})),S.value.map(((e,t)=>({...e,value:e.value||0,color:(0,i.h)(e.color)||I.value[t]||i.p[t]||i.p[t%i.p.length]}))))));function Q(e){return e/z.value}function W(e){return A.value.style.layout.independant?e.target?e.value/e.target:A.value.style.layout.percentage?e.value>100?1:e.value/100:0===A.value.style.layout.target?1:e.value/A.value.style.layout.target:Q(e.value)}function B(e){return A.value.style.layout.independant&&e.target||A.value.style.layout.target}const N=t;function V(e,t){N("selectDatapoint",{datapoint:e,index:t}),A.value.events.datapointClick&&A.value.events.datapointClick({datapoint:e,seriesIndex:t})}function K(e,t){A.value.events.datapointEnter&&A.value.events.datapointEnter({datapoint:e,seriesIndex:t})}function O(e,t){A.value.events.datapointLeave&&A.value.events.datapointLeave({datapoint:e,seriesIndex:t})}return(e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"vue-data-ui-component vue-ui-sparkbar",style:(0,o.Tr)({width:"100%",position:"relative",fontFamily:A.value.style.fontFamily,background:null!==C.backgroundOpacity?(0,u.R1)(i.s)(A.value.style.backgroundColor,C.backgroundOpacity):A.value.style.backgroundColor})},[e.$slots.title?(0,a.RG)(e.$slots,"title",(0,o._B)((0,a.v6)({key:0},{title:{...e.title,title:A.value.style.title.text,subtitle:A.value.style.title.subtitle.text}}))):(0,a.Q3)("",!0),!e.$slots.title&&A.value.style.title.text?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"vue-ui-sparkbar-title-container",style:(0,o.Tr)({background:A.value.style.title.backgroundColor,margin:A.value.style.title.margin,textAlign:A.value.style.title.textAlign})},[(0,a.Lk)("div",{class:"vue-ui-sparkbar-title",style:(0,o.Tr)({fontSize:A.value.style.title.fontSize+"px",color:A.value.style.title.color,fontWeight:A.value.style.title.bold?"bold":"normal"})},(0,o.v_)(A.value.style.title.text),5),A.value.style.title.subtitle.text?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"vue-ui-sparkbar-subtitle",style:(0,o.Tr)({fontSize:A.value.style.title.subtitle.fontSize+"px",color:A.value.style.title.subtitle.color,fontWeight:A.value.style.title.subtitle.bold?"bold":"normal"})},(0,o.v_)(A.value.style.title.subtitle.text),5)):(0,a.Q3)("",!0)],4)):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.value,((t,l)=>((0,a.uX)(),(0,a.CE)("div",{style:(0,o.Tr)(`display:flex !important;${["left","right"].includes(A.value.style.labels.name.position)?`flex-direction: ${"right"===A.value.style.labels.name.position?"row-reverse":"row"} !important`:"flex-direction:column !important"};gap:${A.value.style.gap}px !important;align-items:center;${(0,u.R1)(_).length>0&&l!==(0,u.R1)(_).length-1?"margin-bottom:6px":""}`),onClick:e=>V(t,l),onMouseenter:e=>K(t,l),onMouseleave:e=>O(t,l)},[(0,u.R1)(E)?(0,a.Q3)("",!0):(0,a.RG)(e.$slots,"data-label",(0,a.v6)({key:0,ref_for:!0},{bar:{...t,target:B(t),valueLabel:(0,u.R1)(i.a)(t.formatter,t.value,(0,u.R1)(i.d)({p:t.prefix||"",v:t.value,s:t.suffix||"",r:t.rounding||0}),{datapoint:t,seriesIndex:l}),targetLabel:(0,u.R1)(i.a)(t.formatter,B(t),(0,u.R1)(i.d)({p:t.prefix||"",v:B(t),s:t.suffix||"",r:t.rounding||0}),{datapoint:t,seriesIndex:l})}})),!e.$slots["data-label"]||(0,u.R1)(E)?((0,a.uX)(),(0,a.CE)("div",{key:1,style:(0,o.Tr)({display:"flex",justifyContent:["right","top-right"].includes(A.value.style.labels.name.position)?"flex-end":["top-center"].includes(A.value.style.labels.name.position)?"center":"flex-start",alignItems:"center",width:A.value.style.labels.name.width,color:A.value.style.labels.name.color,fontSize:A.value.style.labels.fontSize+"px",fontWeight:A.value.style.labels.name.bold?"bold":"normal",flexWrap:"wrap"})},[(0,u.R1)(E)?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"vue-ui-sparkbar-skeleton-name",style:(0,o.Tr)({width:"60px",height:A.value.style.labels.fontSize+"px",borderRadius:A.value.style.labels.fontSize/4+"px",display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"5px"})},[(0,a.Lk)("div",{style:(0,o.Tr)({height:"100%",width:"40px",borderRadius:A.value.style.labels.fontSize/4+"px",backgroundColor:"#6A6A6A80"})},null,4),(0,a.Lk)("div",{style:(0,o.Tr)({height:"100%",width:"15px",borderRadius:A.value.style.labels.fontSize/4+"px",backgroundColor:"#6A6A6A80"})},null,4)],4)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("span",null,(0,o.v_)(t.name),1),A.value.style.labels.value.show?((0,a.uX)(),(0,a.CE)("span",{key:0,style:(0,o.Tr)("font-weight:"+(A.value.style.labels.value.bold?"bold":"normal"))},": "+(0,o.v_)((0,u.R1)(i.a)(t.formatter,t.value,(0,u.R1)(i.d)({p:t.prefix||"",v:t.value,s:t.suffix||"",r:t.rounding||0}),{datapoint:t,seriesIndex:l})),5)):(0,a.Q3)("",!0),A.value.style.layout.showTargetValue?((0,a.uX)(),(0,a.CE)("span",d,(0,o.v_)(" "+A.value.style.layout.targetValueText)+" "+(0,o.v_)((0,u.R1)(i.a)(t.formatter,B(t),(0,u.R1)(i.d)({p:t.prefix||"",v:B(t),s:t.suffix||"",r:t.rounding||0}),{datapoint:t,seriesIndex:l})),1)):(0,a.Q3)("",!0)],64))],4)):(0,a.Q3)("",!0),((0,a.uX)(),(0,a.CE)("svg",{xmlns:(0,u.R1)(i.X),viewBox:`0 0 ${F.value.width} ${F.value.height}`,width:"100%"},[(0,a.bF)((0,u.R1)(x)),(0,a.Lk)("defs",null,[(0,a.Lk)("linearGradient",{x1:"0%",y1:"0%",x2:"100%",y2:"0%",id:`sparkbar_gradient_${l}_${R.value}`},[(0,a.Lk)("stop",{offset:"0%","stop-color":(0,u.R1)(i.s)((0,u.R1)(i.i)(t.color,.03),100-A.value.style.bar.gradient.intensity)},null,8,y),(0,a.Lk)("stop",{offset:"100%","stop-color":t.color},null,8,f)],8,c)]),(0,a.Lk)("rect",{height:F.value.height,width:F.value.width,x:0,y:0,fill:(0,u.R1)(i.s)(A.value.style.gutter.backgroundColor,A.value.style.gutter.opacity),rx:F.value.height/2},null,8,g),(0,a.Lk)("rect",{height:F.value.height,width:F.value.width*W(t),x:0,y:0,fill:A.value.style.bar.gradient.underlayerColor,rx:F.value.height/2},null,8,b),(0,a.Lk)("rect",{height:F.value.height,width:F.value.width*W(t),x:0,y:0,fill:A.value.style.bar.gradient.show?`url(#sparkbar_gradient_${l}_${R.value})`:t.color,rx:F.value.height/2},null,8,h)],8,p))],44,v)))),256)),e.$slots.source?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.RG)(e.$slots,"source")],512)):(0,a.Q3)("",!0),(0,u.R1)(E)?((0,a.uX)(),(0,a.Wv)(s.B,{key:3})):(0,a.Q3)("",!0)],4))}}}}]);
//# sourceMappingURL=141.a7b1e06c.js.map