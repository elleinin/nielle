"use strict";(self["webpackChunkNIELLE"]=self["webpackChunkNIELLE"]||[]).push([[180],{6180:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var o=n(144),r=n(6768),i=n(4232),a=n(5130),s=n(5624),d=n(9600),u=n(578);const l=["xmlns"],c={class:"modal-title"},h={class:"draggable-dialog-actions"},m={__name:"BaseDraggableDialog",props:{backgroundColor:{type:String},color:{type:String},headerBg:{type:String},headerColor:{type:String},fullscreenParent:{type:HTMLElement},isFullscreen:{type:Boolean,default:!1},withPadding:{type:Boolean,default:!1},forcedWidth:{type:Number,default:400}},emits:["close"],setup(e,{expose:t,emit:n}){const u=e,m=n,v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(0);function f(){g.value+=1}const L=(0,o.Kh)({left:window.innerWidth/2-200,top:window.innerHeight/2-120,width:u.forcedWidth,height:400,dragging:!1,resizing:!1,dragOffsetX:0,dragOffsetY:0,pointerStartX:0,pointerStartY:0,resizeStartW:0,resizeStartH:0});function k(){v.value=!0,(0,r.dY)((()=>{p.value||(L.left=Math.max(0,window.innerWidth/2-L.width/2),L.top=Math.max(0,window.innerHeight/2-L.height/2),p.value=!0)}))}function w(){v.value=!1,m("close")}t({open:k,close:w});const E=(0,r.EW)((()=>({position:"fixed",left:`${L.left}px`,top:`${L.top}px`,width:`${L.width}px`,height:`${L.height}px`,padding:0,border:"none",background:u.backgroundColor,boxShadow:"0 4px 24px rgba(0,0,0,0.15)",zIndex:9999,overflow:"visible",borderRadius:"2px","--dlg-color":u.color})));function S(e){return e.touches&&e.touches.length?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function x(e){e.preventDefault?.(),f(),L.dragging=!0;const t=S(e);L.dragOffsetX=t.x-L.left,L.dragOffsetY=t.y-L.top,document.addEventListener("mousemove",y),document.addEventListener("mouseup",z),document.addEventListener("touchmove",y,{passive:!1}),document.addEventListener("touchend",z)}function y(e){if(!L.dragging)return;e.preventDefault?.();const t=S(e);let n=t.x-L.dragOffsetX,o=t.y-L.dragOffsetY;n=Math.max(0,Math.min(n,window.innerWidth-L.width)),o=Math.max(0,Math.min(o,window.innerHeight-L.height)),L.left=n,L.top=o}function z(){L.dragging=!1,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",z),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",z)}function b(e){e.preventDefault?.(),f(),L.resizing=!0;const t=S(e);L.pointerStartX=t.x,L.pointerStartY=t.y,L.resizeStartW=L.width,L.resizeStartH=L.height,document.addEventListener("mousemove",M),document.addEventListener("mouseup",D),document.addEventListener("touchmove",M,{passive:!1}),document.addEventListener("touchend",D)}function M(e){if(!L.resizing)return;e.preventDefault?.();const t=S(e);let n=t.x-L.pointerStartX,o=t.y-L.pointerStartY;L.width=Math.max(240,L.resizeStartW+n),L.height=Math.max(400,L.resizeStartH+o)}function D(){L.resizing=!1,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",D),document.removeEventListener("touchmove",M),document.removeEventListener("touchend",D)}function C(e){e.preventDefault?.(),f(),L.resizing=!0;const t=S(e);L.pointerStartX=t.x,L.pointerStartY=t.y,L.resizeStartW=L.width,L.resizeStartH=L.height,L.resizeStartLeft=L.left,L.resizeStartTop=L.top,document.addEventListener("mousemove",X),document.addEventListener("mouseup",$),document.addEventListener("touchmove",X,{passive:!1}),document.addEventListener("touchend",$)}function X(e){if(!L.resizing)return;e.preventDefault?.();const t=S(e);let n=t.x-L.pointerStartX,o=Math.min(Math.max(0,L.resizeStartLeft+n),L.resizeStartLeft+L.resizeStartW-240),r=L.resizeStartW-(o-L.resizeStartLeft),i=t.y-L.pointerStartY,a=Math.max(400,L.resizeStartH+i);L.left=o,L.width=r,L.height=a}function $(){L.resizing=!1,document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",$),document.removeEventListener("touchmove",X),document.removeEventListener("touchend",$)}function W(e){e.key&&"Escape"===e.key&&w()}return(0,r.sV)((()=>{document.addEventListener("keydown",W)})),(0,r.hi)((()=>{z(),D(),$(),document.removeEventListener("keydown",W)})),(t,n)=>((0,r.uX)(),(0,r.Wv)(r.Im,{to:e.isFullscreen?e.fullscreenParent:"body",key:g.value},[v.value?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"modal vue-ui-draggable-dialog",style:(0,i.Tr)(E.value),onClick:n[0]||(n[0]=(0,a.D$)((()=>{}),["stop"]))},[(0,r.Lk)("div",{class:"modal-header",style:(0,i.Tr)({backgroundColor:e.headerBg,color:e.headerColor})},[(0,r.Lk)("span",{class:"drag-handle",onMousedown:(0,a.D$)(x,["stop","prevent"]),onTouchstart:(0,a.D$)(x,["stop","prevent"])},[((0,r.uX)(),(0,r.CE)("svg",{xmlns:(0,o.R1)(d.X),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[...n[1]||(n[1]=[(0,r.Lk)("path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),(0,r.Lk)("path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),(0,r.Lk)("path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),(0,r.Lk)("path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),(0,r.Lk)("path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),(0,r.Lk)("path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1)])],8,l))],32),(0,r.Lk)("span",c,[(0,r.RG)(t.$slots,"title",{},void 0,!0)]),(0,r.Lk)("div",h,[(0,r.RG)(t.$slots,"actions",{},void 0,!0),(0,r.Lk)("button",{class:"close",onClick:w},[(0,r.bF)(s["default"],{name:"close",stroke:e.headerColor},null,8,["stroke"])])])],4),(0,r.Lk)("div",{class:(0,i.C4)({"modal-body":!e.withPadding,"modal-body-pad":e.withPadding})},[(0,r.RG)(t.$slots,"content",{},void 0,!0)],2),(0,r.Lk)("div",{class:"resize-handle",onMousedown:(0,a.D$)(b,["stop","prevent"]),onTouchstart:(0,a.D$)(b,["stop","prevent"])},null,32),(0,r.Lk)("div",{class:"resize-handle resize-handle-left",onMousedown:(0,a.D$)(C,["stop","prevent"]),onTouchstart:(0,a.D$)(C,["stop","prevent"])},null,32)],4)):(0,r.Q3)("",!0)],8,["to"]))}},v=(0,u._)(m,[["__scopeId","data-v-1be15e28"]])}}]);
//# sourceMappingURL=180.9c890b62.js.map