"use strict";(self["webpackChunkNIELLE"]=self["webpackChunkNIELLE"]||[]).push([[452],{8452:function(e,l,a){a.r(l),a.d(l,{default:function(){return K}});a(4114);var t=a(6768),u=a(144),o=a(4232),s=a(9600),i=a(4406),v=a(1921),r=a(8988),n=a(8617),d=a(4466),h=a(4171),y=a(578);const c=["id"],p=["xmlns","viewBox"],f=["width","height"],g=["id"],b=["stop-color"],k=["stop-color"],x=["id"],m=["stop-color"],w=["stop-color"],L=["id"],R=["stop-color"],E=["stop-color"],C={key:1},_=["d","fill"],$=["d","fill"],N=["d","stroke","stroke-width"],W=["d","stroke","stroke-width"],A=["x","y","width","height","fill","rx"],M=["x1","x2","y1","y2","stroke","stroke-width","stroke-dasharray"],I=["x1","x2","y1","y2","stroke","stroke-dasharray","stroke-width"],X=["cx","cy","r","fill","stroke","stroke-width"],V=["x","y","font-size","font-weight","fill"],z=["x","y","height","width","onMouseenter","onMouseleave","onClick"],F={__name:"vue-ui-sparkline",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}},showInfo:{type:Boolean,default:!0},selectedIndex:{type:Number,default:void 0},heightRatio:{type:Number,default:1},forcedPadding:{type:Number,default:30}},emits:["hoverIndex","selectDatapoint"],setup(e,{emit:l}){const y=(0,t.$V)((()=>a.e(654).then(a.bind(a,3654)))),F=(0,t.$V)((()=>a.e(947).then(a.bind(a,947)))),{vue_ui_sparkline:K}=(0,i.u)(),Q=e,G=(0,t.EW)((()=>Array.isArray(Q.dataset)&&Q.dataset.length>0)),S=(0,u.KR)((0,s.c)()),T=(0,u.KR)(null),B=(0,u.KR)(null),O=(0,u.KR)(null),Y=(0,u.KR)(U());function D(e){return(0,s.ah)(e).map((e=>({period:"-",value:e})))}const{loading:j,FINAL_DATASET:q,manualLoading:P}=(0,n.u)({...(0,u.QW)(Q),FINAL_CONFIG:Y,prepareConfig:U,callback:()=>{Promise.resolve().then((async()=>{await(0,t.dY)(),re()}))},skeletonDataset:D(12),skeletonConfig:(0,s.t)({defaultConfig:Y.value,userConfig:{style:{backgroundColor:"#99999930",scaleMin:0,scaleMax:null,animation:{show:!1},line:{color:"#AAAAAA"},bar:{color:"#AAAAAA"},area:{color:"#CACACA"},zeroLine:{color:"#6A6A6A"},dataLabel:{show:!1},tooltip:{show:!1}}}})}),{svgRef:J}=(0,r.u)({config:Y.value.style.title});function U(){const e=(0,i.a)({userConfig:Q.config,defaultConfig:K});let l={};return l=e.theme?{...(0,i.a)({userConfig:d.t.vue_ui_sparkline[e.theme]||Q.config,defaultConfig:e})}:e,Q.config&&(0,s.O)(Q.config,"style.scaleMin")?l.style.scaleMin=Q.config.style.scaleMin:l.style.scaleMin=null,Q.config&&(0,s.O)(Q.config,"style.scaleMax")?l.style.scaleMax=Q.config.style.scaleMax:l.style.scaleMax=null,l}const Z=(0,t.EW)((()=>(0,s.af)({data:q.value,threshold:Y.value.downsample.threshold})));(0,t.wB)((()=>Q.config),(e=>{j.value||(Y.value=U()),de(),he.value.chartWidth=Y.value.style.chartWidth}),{deep:!0}),(0,t.wB)((()=>Q.dataset),(e=>{Array.isArray(e)&&e.length>0&&(P.value=!1),H.value=(0,s.af)({data:q.value.map((e=>({...e,value:[void 0].includes(e.value)?null:e.value}))),threshold:Y.value.downsample.threshold})}),{deep:!0});const H=(0,u.KR)(ee());function ee(){return(0,s.af)({data:q.value.map((e=>Y.value.style.animation.show&&q.value.length>1?{...e,value:null}:{...e,value:[void 0].includes(e.value)?null:e.value})),threshold:Y.value.downsample.threshold})}const le=(0,u.IJ)(null),ae=(0,u.IJ)(null),te=(0,u.KR)(!1),ue=(0,u.KR)(0),oe=(0,u.KR)([]),se=(0,u.KR)(""),ie=(0,t.EW)((()=>{const e=(Z.value||[]).map((e=>`${e.period}::${Number.isFinite(e.value)?e.value:0}`)).join("|"),l=Y.value?.style?.animation||{};return`${e}#${!!l.show}#${l.animationFrames||0}`}));function ve(){ue.value&&(cancelAnimationFrame(ue.value),ue.value=0),oe.value.forEach((e=>clearTimeout(e))),oe.value=[],te.value=!1}function re(){const e=Y.value?.style?.animation||{},l=Z.value||[],a=ie.value;if(a&&a===se.value&&(te.value||H.value.length===l.length))return;if(ve(),!e.show||j.value||l.length<=1)return H.value=l,void(se.value=a);te.value=!0,se.value=a,H.value=[];const t=Math.max(1,Number(e.animationFrames)||1),u=Math.max(1,Math.floor(t/l.length));let o=0;const s=()=>{if(a===ie.value)if(o<l.length){H.value.push(l[o]);const e=setTimeout((()=>{ue.value=requestAnimationFrame(s)}),u);oe.value.push(e),o+=1}else H.value=l,ve();else ve()};ue.value=requestAnimationFrame(s)}(0,t.wB)(ie,(()=>{re()})),(0,t.sV)((()=>{de(),re()})),(0,t.xo)((()=>{ve()}));const ne=(0,t.EW)((()=>!!Y.value.debug));function de(){if((0,s.o)(Q.dataset)?((0,s.f)({componentName:"VueUiSparkline",type:"dataset",debug:ne.value}),P.value=!0):Q.dataset.forEach(((e,l)=>{(0,s.g)({datasetObject:e,requiredAttributes:["period","value"]}).forEach((e=>{(0,s.f)({componentName:"VueUiSparkline",type:"datasetSerieAttribute",property:e,index:l,debug:ne.value})}))})),(0,s.o)(Q.dataset)||(P.value=Y.value.loading),Y.value.responsive){const e=(0,v.t)((()=>{const{width:e,height:l}=(0,v.u)({chart:T.value,title:Y.value.style.title.show&&Q.showInfo?B.value:null,source:O.value});requestAnimationFrame((()=>{he.value.width=e,he.value.height=l,he.value.chartWidth=Y.value.style.chartWidth/500*e,he.value.padding=Q.forcedPadding/500*e}))}));le.value&&(ae.value&&le.value.unobserve(ae.value),le.value.disconnect()),le.value=new ResizeObserver(e),ae.value=T.value.parentNode,le.value.observe(ae.value)}}(0,t.xo)((()=>{le.value&&(ae.value&&le.value.unobserve(ae.value),le.value.disconnect())}));const he=(0,u.KR)({height:80*Q.heightRatio,width:500,chartWidth:Y.value.style.chartWidth,padding:Q.forcedPadding}),ye=l,ce=(0,t.EW)((()=>{const{top:e,right:l,bottom:a,left:t}=Y.value.style.padding;return{top:e,left:t,right:he.value.width-l,bottom:he.value.height-a,start:Q.showInfo&&Y.value.style.dataLabel.show&&"left"===Y.value.style.dataLabel.position?he.value.width-he.value.chartWidth+t:he.value.padding+t,width:Q.showInfo&&Y.value.style.dataLabel.show?he.value.chartWidth-t-l:he.value.width-he.value.padding-t-l,height:he.value.height-e-a}})),pe=(0,t.EW)((()=>[null,void 0].includes(Y.value.style.scaleMin)?Math.min(...H.value.map((e=>isNaN(e.value)||[void 0,null,"NaN",NaN,1/0,-1/0].includes(e.value)?0:e.value||0))):Y.value.style.scaleMin)),fe=(0,t.EW)((()=>[null,void 0].includes(Y.value.style.scaleMax)?Math.max(...H.value.map((e=>isNaN(e.value)||[void 0,null,"NaN",NaN,1/0,-1/0].includes(e.value)?0:e.value||0))):Y.value.style.scaleMax)),ge=(0,t.EW)((()=>{const e=pe.value>=0?0:pe.value;return Math.abs(e)})),be=(0,t.EW)((()=>fe.value+ge.value)),ke=(0,t.EW)((()=>ce.value.bottom-ce.value.height*xe(ge.value)));function xe(e){return isNaN(e/be.value)?0:e/be.value}const me=(0,t.EW)((()=>Z.value.length-1||1)),we=(0,t.EW)((()=>(0,h.u)({values:Z.value.map((e=>e.period)),maxDatapoints:Z.value.length,formatter:Y.value.style.dataLabel.datetimeFormatter,start:0,end:Z.value.length}))),Le=(0,t.EW)((()=>H.value.map(((e,l)=>{const a=isNaN(e.value)||[void 0,null,"NaN",NaN,1/0,-1/0].includes(e.value)?0:e.value||0,t=ce.value.width/me.value;return{absoluteValue:a,period:we.value&&we.value[l]&&we.value[l].text?we.value[l].text:e.period,plotValue:a+ge.value,toMax:xe(a+ge.value),x:ce.value.start+l*t,y:ce.value.bottom-ce.value.height*xe(a+ge.value),id:`plot_${S.value}_${l}`,color:Ae.value?Y.value.style.bar.color:Y.value.style.area.useGradient?(0,s.i)(Y.value.style.line.color,.05*(1-l/me.value)):Y.value.style.line.color,width:t}})))),Re=(0,t.EW)((()=>{const e={x:Le.value[0].x||0,y:(he.value.height||0)-6},l={x:Le.value[Le.value.length-1].x||0,y:(he.value.height||0)-6},a=[];return Le.value.forEach((e=>{a.push(`${e.x||0},${e.y||0} `)})),[e.x,e.y,...a,l.x,l.y].toString()})),Ee=(0,u.KR)(void 0),Ce=(0,u.KR)(void 0);function _e(e,l){Y.value.events.datapointEnter&&Y.value.events.datapointEnter({datapoint:e,seriesIndex:l}),Ee.value=e,Ce.value||(Ce.value=e),ye("hoverIndex",{index:l})}function $e(e,l){Y.value.events.datapointLeave&&Y.value.events.datapointLeave({datapoint:e,seriesIndex:l}),Ce.value=Ee.value,Ee.value=void 0,ye("hoverIndex",{index:void 0})}const Ne=(0,t.EW)((()=>{if(G.value){const e=Le.value.map((e=>e.absoluteValue)),l=e.reduce(((e,l)=>e+l),0);return{latest:Le.value[Le.value.length-1]?Le.value[Le.value.length-1].absoluteValue:0,sum:l,average:l/Le.value.length,median:(0,s.ag)(e),trend:(0,s.L)(Le.value.map((({x:e,y:l,absoluteValue:a})=>({x:e,y:l,value:a})))).trend}}return{latest:null,sum:null,average:null,median:null,trend:null}})),We=(0,t.EW)((()=>G.value?"latest"===Y.value.style.dataLabel.valueType?Ne.value.latest:"sum"===Y.value.style.dataLabel.valueType?Ne.value.sum:"average"===Y.value.style.dataLabel.valueType?Ne.value.average:0:0)),Ae=(0,t.EW)((()=>Y.value.type&&"bar"===Y.value.type));function Me(e,l){Y.value.events.datapointClick&&Y.value.events.datapointClick({datapoint:e,seriesIndex:l}),ye("selectDatapoint",{datapoint:e,index:l})}return(l,a)=>((0,t.uX)(),(0,t.CE)("div",{ref_key:"sparklineChart",ref:T,class:"vue-data-ui-component vue-ui-sparkline",id:S.value,style:(0,o.Tr)(`width:100%;font-family:${Y.value.style.fontFamily};`)},[(0,t.RG)(l.$slots,"before",(0,o._B)((0,t.Ng)({selected:Ee.value,latest:Ne.value.latest,sum:Ne.value.sum,average:Ne.value.average,median:Ne.value.median,trend:Ne.value.trend})),void 0,!0),Y.value.style.title.show&&e.showInfo?((0,t.uX)(),(0,t.CE)("div",{key:0,ref_key:"chartTitle",ref:B,class:"vue-ui-sparkline-title",style:(0,o.Tr)(`display:flex;align-items:center;width:100%;color:${Y.value.style.title.color};background:${Y.value.style.backgroundColor};justify-content:${"left"===Y.value.style.title.textAlign?"flex-start":"right"===Y.value.style.title.textAlign?"flex-end":"center"};height:${2*Y.value.style.title.fontSize}px;font-size:${Y.value.style.title.fontSize}px;font-weight:${Y.value.style.title.bold?"bold":"normal"};`)},[(0,t.Lk)("span",{style:(0,o.Tr)("padding:"+("left"===Y.value.style.title.textAlign?"0 0 0 12px":"right"===Y.value.style.title.textAlign?"0 12px 0 0":"0"))},(0,o.v_)(Ee.value?Ee.value.period:Y.value.style.title.text),5)],4)):(0,t.Q3)("",!0),((0,t.uX)(),(0,t.CE)("svg",{ref_key:"svgRef",ref:J,xmlns:(0,u.R1)(s.X),viewBox:`0 0 ${he.value.width} ${he.value.height}`,style:(0,o.Tr)(`background:${Y.value.style.backgroundColor};overflow:visible`),onMouseleave:a[0]||(a[0]=e=>Ce.value=void 0)},[(0,t.bF)((0,u.R1)(y)),l.$slots["chart-background"]?((0,t.uX)(),(0,t.CE)("foreignObject",{key:0,x:0,y:0,width:he.value.width<=0?10:he.value.width,height:he.value.height<=0?10:he.value.height,style:{pointerEvents:"none"}},[(0,t.RG)(l.$slots,"chart-background",{},void 0,!0)],8,f)):(0,t.Q3)("",!0),(0,t.Lk)("defs",null,[(0,t.Lk)("linearGradient",{x1:"0%",y1:"0%",x2:"100%",y2:"0%",id:`sparkline_gradient_${S.value}`},[(0,t.Lk)("stop",{offset:"0%","stop-color":(0,u.R1)(s.s)((0,u.R1)(s.i)(Y.value.style.area.color,.05),Y.value.style.area.opacity)},null,8,b),(0,t.Lk)("stop",{offset:"100%","stop-color":(0,u.R1)(s.s)(Y.value.style.area.color,Y.value.style.area.opacity)},null,8,k)],8,g),(0,t.Lk)("linearGradient",{x2:"0%",y2:"100%",id:`sparkline_bar_gradient_pos_${S.value}`},[(0,t.Lk)("stop",{offset:"0%","stop-color":Y.value.style.bar.color},null,8,m),(0,t.Lk)("stop",{offset:"100%","stop-color":(0,u.R1)(s.i)(Y.value.style.bar.color,.05)},null,8,w)],8,x),(0,t.Lk)("linearGradient",{x2:"0%",y2:"100%",id:`sparkline_bar_gradient_neg_${S.value}`},[(0,t.Lk)("stop",{offset:"0%","stop-color":(0,u.R1)(s.i)(Y.value.style.bar.color,.05)},null,8,R),(0,t.Lk)("stop",{offset:"100%","stop-color":Y.value.style.bar.color},null,8,E)],8,L)]),Y.value.style.area.show&&!Ae.value&&Le.value[0]&&Le.value.length>1?((0,t.uX)(),(0,t.CE)("g",C,[Y.value.style.line.smooth?((0,t.uX)(),(0,t.CE)("path",{key:0,d:`M ${Le.value[0].x},${ce.value.bottom} ${(0,u.R1)(s.z)(Le.value)} L ${Le.value.at(-1).x},${ce.value.bottom} Z`,fill:Y.value.style.area.useGradient?`url(#sparkline_gradient_${S.value})`:(0,u.R1)(s.s)(Y.value.style.area.color,Y.value.style.area.opacity)},null,8,_)):((0,t.uX)(),(0,t.CE)("path",{key:1,d:`M${Re.value}Z`,fill:Y.value.style.area.useGradient?`url(#sparkline_gradient_${S.value})`:(0,u.R1)(s.s)(Y.value.style.area.color,Y.value.style.area.opacity)},null,8,$))])):(0,t.Q3)("",!0),Y.value.style.line.smooth&&!Ae.value?((0,t.uX)(),(0,t.CE)("path",{key:2,d:`M ${(0,u.R1)(s.z)(Le.value)||"0,0"}`,stroke:Y.value.style.line.color,fill:"none","stroke-width":Y.value.style.line.strokeWidth,"stroke-linecap":"round"},null,8,N)):(0,t.Q3)("",!0),Y.value.style.line.smooth||Ae.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("path",{key:3,d:`M ${(0,u.R1)(s.B)(Le.value)||"0,0"}`,stroke:Y.value.style.line.color,fill:"none","stroke-width":Y.value.style.line.strokeWidth,"stroke-linecap":"round"},null,8,W)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Le.value,((l,a)=>((0,t.uX)(),(0,t.CE)("g",null,[Ae.value?((0,t.uX)(),(0,t.CE)("rect",{key:0,x:l.x-l.width/2,y:isNaN(l.absoluteValue>0?l.y:ke.value)?0:l.absoluteValue>0?l.y:ke.value,width:l.width,height:isNaN(Math.abs(l.y-ke.value))?0:Math.abs(l.y-ke.value),fill:l.absoluteValue>0?`url(#sparkline_bar_gradient_pos_${S.value})`:`url(#sparkline_bar_gradient_neg_${S.value})`,rx:Y.value.style.bar.borderRadius},null,8,A)):(0,t.Q3)("",!0),Y.value.style.verticalIndicator.show&&(Ee.value&&l.id===Ee.value.id||e.selectedIndex===a)?((0,t.uX)(),(0,t.CE)("line",{key:1,x1:l.x,x2:l.x,y1:ce.value.top-6,y2:ce.value.bottom,stroke:Y.value.style.verticalIndicator.color||l.color,"stroke-width":Y.value.style.verticalIndicator.strokeWidth,"stroke-linecap":"round","stroke-dasharray":Y.value.style.verticalIndicator.strokeDasharray||0},null,8,M)):(0,t.Q3)("",!0)])))),256)),pe.value<0?((0,t.uX)(),(0,t.CE)("line",{key:4,x1:ce.value.start,x2:ce.value.start+ce.value.width,y1:(0,u.R1)(s.r)(ke.value,ce.value.bottom),y2:(0,u.R1)(s.r)(ke.value,ce.value.bottom),stroke:Y.value.style.zeroLine.color,"stroke-dasharray":2*Y.value.style.zeroLine.strokeWidth,"stroke-width":Y.value.style.zeroLine.strokeWidth,"stroke-linecap":"round"},null,8,I)):(0,t.Q3)("",!0),Y.value.style.plot.show?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:5},(0,t.pI)(Le.value,((l,a)=>((0,t.uX)(),(0,t.CE)("g",null,[Ee.value&&l.id===Ee.value.id||e.selectedIndex===a||1===(0,u.R1)(q).length?((0,t.uX)(),(0,t.CE)("circle",{key:0,cx:l.x,cy:l.y,r:Y.value.style.plot.radius,fill:l.color,stroke:Y.value.style.plot.stroke,"stroke-width":Y.value.style.plot.strokeWidth},null,8,X)):(0,t.Q3)("",!0)])))),256)):(0,t.Q3)("",!0),e.showInfo&&Y.value.style.dataLabel.show?((0,t.uX)(),(0,t.CE)("text",{key:6,x:"left"===Y.value.style.dataLabel.position?12+Y.value.style.dataLabel.offsetX:ce.value.width+12+Y.value.style.dataLabel.offsetX,y:he.value.height/2+Y.value.style.dataLabel.fontSize/2.5+Y.value.style.dataLabel.offsetY,"font-size":Y.value.style.dataLabel.fontSize,"font-weight":Y.value.style.dataLabel.bold?"bold":"normal",fill:Y.value.style.dataLabel.color},(0,o.v_)(Ee.value?(0,u.R1)(s.a)(Y.value.style.dataLabel.formatter,Ee.value.absoluteValue,(0,u.R1)(s.d)({p:Y.value.style.dataLabel.prefix,v:Ee.value.absoluteValue,s:Y.value.style.dataLabel.suffix,r:Y.value.style.dataLabel.roundingValue}),{datapoint:Ee.value}):(0,u.R1)(s.a)(Y.value.style.dataLabel.formatter,We.value,(0,u.R1)(s.d)({p:Y.value.style.dataLabel.prefix,v:We.value,s:Y.value.style.dataLabel.suffix,r:Y.value.style.dataLabel.roundingValue}))),9,V)):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Le.value,((e,l)=>((0,t.uX)(),(0,t.CE)("rect",{x:e.x-(ce.value.width/(me.value+1)>he.value.padding?he.value.padding:ce.value.width/(me.value+1))/2,y:ce.value.top-6,height:ce.value.height+6,width:ce.value.width/(me.value+1)>he.value.padding?he.value.padding:ce.value.width/(me.value+1),fill:"transparent",onMouseenter:()=>_e(e,l),onMouseleave:()=>$e(e,l),onClick:()=>Me(e,l)},null,40,z)))),256)),(0,t.RG)(l.$slots,"svg",{svg:he.value},void 0,!0)],44,p)),Ee.value&&Y.value.style.tooltip.show?((0,t.uX)(),(0,t.Wv)((0,u.R1)(F),{key:1,x:Ee.value.x,y:Ee.value.y,prevX:Ce.value.x,prevY:Ce.value.y,offsetY:3*Y.value.style.plot.radius+Y.value.style.tooltip.offsetY,svgRef:(0,u.R1)(J),background:Y.value.style.tooltip.backgroundColor,color:Y.value.style.tooltip.color,fontSize:Y.value.style.tooltip.fontSize,borderWidth:Y.value.style.tooltip.borderWidth,borderColor:Y.value.style.tooltip.borderColor,borderRadius:Y.value.style.tooltip.borderRadius,backgroundOpacity:Y.value.style.tooltip.backgroundOpacity},{default:(0,t.k6)((()=>[(0,t.RG)(l.$slots,"tooltip",(0,o._B)((0,t.Ng)({...Ee.value})),(()=>[(0,t.eW)((0,o.v_)(Ee.value.period)+": "+(0,o.v_)((0,u.R1)(s.a)(Y.value.style.dataLabel.formatter,Ee.value.absoluteValue,(0,u.R1)(s.d)({p:Y.value.style.dataLabel.prefix,v:Ee.value.absoluteValue,s:Y.value.style.dataLabel.suffix,r:Y.value.style.dataLabel.roundingValue}),{datapoint:Ee.value})),1)]),!0)])),_:3},8,["x","y","prevX","prevY","offsetY","svgRef","background","color","fontSize","borderWidth","borderColor","borderRadius","backgroundOpacity"])):(0,t.Q3)("",!0),l.$slots.source?((0,t.uX)(),(0,t.CE)("div",{key:2,ref_key:"source",ref:O,dir:"auto"},[(0,t.RG)(l.$slots,"source",{},void 0,!0)],512)):(0,t.Q3)("",!0),(0,u.R1)(j)?((0,t.uX)(),(0,t.Wv)(n.B,{key:3})):(0,t.Q3)("",!0)],12,c))}},K=(0,y._)(F,[["__scopeId","data-v-cc569021"]])}}]);
//# sourceMappingURL=452.bd009d07.js.map